<!DOCTYPE html>
<meta charset="utf-8">

<head>
    <link rel="stylesheet" href="./css/aggregate.css">
    <!-- bootstrap -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
</head>
<body>
    <h1 align="center">Bar Chart of Aggregate Purchasing Power by Continents for the Year 2013 </h1>
    <div class="btn-group btn-group-justified" role="group" aria-label="...">
      <div class="btn-group" role="group">
        <a href="./index.html"><button type="button" class="btn btn-default">G20 Countries</button></a>
      </div>
      <div class="btn-group" role="group">
        <div class="dropdown">
          <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Bar Graphs for the year 2013
          <span class="caret"></span></button>
          <ul class="dropdown-menu col-mg-4">
            <li><a href="./countryPopulation.html">Country v/s Population</a></li>
            <li><a href="./countryGDP.html">Country v/s GDP</a></li>
            <li><a href="./countryPurchase.html">Country v/s Purchasing Power</a></li>
          </ul>
        </div>
      </div>
      <div class="btn-group" role="group">
        <div class="dropdown">
          <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Stacked Bar Graphs of Growth
          <span class="caret"></span></button>
          <ul class="dropdown-menu col-mg-4">
            <li><a href="./growth.html">Growth in Population from 2010 to 2013</a></li>
            <li><a href="./growthPurchase.html">Growth in Purchasing Power from 2010 to 2013</a></li>
          </ul>
        </div>
      </div>
      <div class="btn-group" role="group">
        <div class="dropdown">
          <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">Bar Graphs: Continent Wise
          <span class="caret"></span></button>
          <ul class="dropdown-menu col-mg-4">
            <li><a href="./aggregatePopulation.html">Aggregate of Population in 2013</a></li>
            <li><a href="./aggregatePurchase.html">Aggregate of Purchasing Power for 2013</a></li>
          </ul>
        </div>
      </div>
    </div>

    <script src="http://d3js.org/d3.v3.min.js"></script>
    <script>
        // set the dimensions of the canvas
        var margin = {
                top: 20,
                right: 20,
                bottom: 70,
                left: 40
            },
            width = 600 - margin.left - margin.right,
            height = 300 - margin.top - margin.bottom;


        // set the ranges
        var x = d3.scale.ordinal().rangeRoundBands([0, width], .05);

        var y = d3.scale.linear().range([height, 0]);

        // define the axis
        var xAxis = d3.svg.axis()
            .scale(x)
            .orient("bottom")


        var yAxis = d3.svg.axis()
            .scale(y)
            .orient("left")
            .ticks(10);


        // add the SVG element
        var svg = d3.select("body").append("svg")
            .attr("width", width + margin.left + margin.right)
            .attr("height", height + margin.top + margin.bottom)
            .append("g")
            .attr("transform",
                "translate(" + margin.left + "," + margin.top + ")");


        // load the data
        d3.json("./../json/aggregateContinentData.json", function(error, data) {

            data.forEach(function(d) {

                d["continent"] = d["continent"];
                d["GDP Billions (US$) - 2013"] = +d["GDP Billions (US$) - 2013"];
            });

            //sort the data
            data.sort(function(a, b) {
                return b["GDP Billions (US$) - 2013"] - a["GDP Billions (US$) - 2013"];
            });

            // scale the range of the data
            x.domain(data.map(function(d) {
                return d["continent"];
            }));
            y.domain([0, d3.max(data, function(d) {
                return d["GDP Billions (US$) - 2013"];
            })]);

            // add axis
            svg.append("g")
                .attr("class", "x axis")
                .attr("transform", "translate(0," + height + ")")
                .call(xAxis)
                .selectAll("text")
                .style("text-anchor", "end")
                .attr("dx", "-.8em")
                .attr("dy", "-.55em")
                .attr("transform", "rotate(-50)");

            svg.append("g")
                .attr("class", "y axis")
                .call(yAxis)
                .append("text")
                .attr("transform", "rotate(-90)")
                .attr("y", 5)
                .attr("dy", ".71em")
                .style("text-anchor", "end")
                .text("Frequency");


            // Add bar chart
            svg.selectAll("bar")
                .data(data)
                .enter().append("rect")
                .attr("class", "bar")
                .attr("x", function(d) {
                    return x(d["continent"]);
                })
                .attr("width", x.rangeBand())
                .attr("y", function(d) {
                    return y(d["GDP Billions (US$) - 2013"]);
                })
                .attr("height", function(d) {
                    return height - y(d["GDP Billions (US$) - 2013"]);
                });

        });
    </script>

    <br>
    <h3>Aggregate GDP by Continent</h3>
    <!-- <a href="aggregatePurchase.html">Next -></a> -->
    <footer id=footer>
      <p><strong>Created By: Kirti Jalan </strong></p>
    </footer>
</body>

</html>
